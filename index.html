<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>saveforascream</title>
  <style>
    :root{ --bg:#000; --fg:#ddd; --muted:#a8a8a8; }

    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
      overflow:hidden;
    }

    a{ color:var(--fg); text-decoration:none }

    /* Titre central */
    #titre{
      position:fixed;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      font-size:clamp(28px,6vw,64px);
      letter-spacing:.02em;
      white-space:nowrap;
      cursor:pointer;
      user-select:none;
    }

    /* Zone qui contient toutes les entrées, en plein écran */
    #row{
      position:fixed;
      inset:0;              /* left:0; top:0; right:0; bottom:0 */
      pointer-events:auto;
      visibility:hidden;
      opacity:0;
      transition:opacity .2s ease;
    }
    #row.shown{ visibility:visible; opacity:1; }

    /* Chaque entrée est positionnée individuellement */
    .entry{
      position:absolute;
      font-family:inherit;
      font-size:clamp(12px,1.6vw,16px);
      color:var(--fg);
      white-space:nowrap;
      opacity:.95;
      transition:color .25s ease, opacity .2s ease, transform .3s ease;
      padding:.1rem .2rem;
    }
    .entry:hover{ opacity:1; }
    .entry:active{ animation:flash .25s ease; }

    @keyframes flash{
      0%{color:var(--fg);}
      50%{color:#fff;}
      100%{color:var(--fg);}
    }

    .admin{
      position:fixed;
      right:14px; bottom:10px;
      font-size:12px;
      color:var(--muted)
    }
  </style>
</head>
<body>
  <div id="titre">saveforascream</div>

  <!-- contiendra les entrées, chacune positionnée en JS -->
  <div id="row" aria-live="polite"></div>

  <a class="admin" href="admin.html">admin</a>

  <script>
    const JSON_PATH = 'content/index.json';
    const titre = document.getElementById('titre');
    const row   = document.getElementById('row');

    // utilitaire
    function rand(min,max){ return Math.random() * (max - min) + min; }

    // Positionne chaque entrée à un endroit aléatoire,
    // en évitant qu'elles soient toutes sur exactement la même "ligne".
    function scatterEntries(){
      const entries = row.querySelectorAll('.entry');
      const W = window.innerWidth;
      const H = window.innerHeight;

      const marginX = 32;
      const minY = H * 0.60;   // zone basse de l'écran
      const maxY = H * 0.90;

      let lastY = null;

      entries.forEach(el => {
        const w = el.offsetWidth || 80;
        const h = el.offsetHeight || 20;

        let x, y, tries = 0;
        do {
          x = rand(marginX, W - marginX - w);
          y = rand(minY, maxY - h);
          tries++;
        } while (lastY !== null && Math.abs(y - lastY) < 24 && tries < 10);

        lastY = y;
        el.style.transform = `translate(${x}px, ${y}px)`;
      });
    }

    // Charge le JSON et construit les liens
    fetch(JSON_PATH + '?_=' + Date.now())
      .then(r => r.json())
      .then(list => {
        row.innerHTML = '';
        list.forEach(it => {
          const a = document.createElement('a');
          a.className = 'entry';
          a.textContent = it.title;
          a.href = it.path;
          a.target = '_self';
          row.appendChild(a);
        });
        row.classList.add('shown');
        // attendre un frame pour que les dimensions soient calculées
        requestAnimationFrame(scatterEntries);
      })
      .catch(() =>
